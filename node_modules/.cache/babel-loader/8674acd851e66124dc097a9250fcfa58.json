{"ast":null,"code":"export const convertXml = dataFromForm => {\n  console.log(getHeaders(formToArray(dataFromForm) || []));\n};\nexport const formToArray = dataFromForm => {\n  var _xmlDoc$getElementsBy;\n\n  var xmlParser = new DOMParser();\n  var xmlDoc = xmlParser.parseFromString(dataFromForm, \"text/xml\");\n  return (_xmlDoc$getElementsBy = xmlDoc.getElementsByTagName(\"CSVIntervalData\")[0].textContent) === null || _xmlDoc$getElementsBy === void 0 ? void 0 : _xmlDoc$getElementsBy.split(\"\\n\");\n};\nexport const getHeaders = xmlDocArr => {\n  let header;\n  xmlDocArr.forEach(row => {\n    if (row.includes(\"100\")) header = row.split(\",\"); //get the header row which contains 100\n  });\n  return header;\n};\nvar A = [[\"n\", \"sqrt(n)\"]];\n\nfor (var j = 1; j < 10; ++j) {\n  A.push([j.toString(), Math.sqrt(j).toString()]);\n}\n\nvar csvRows = [];\n\nfor (var i = 0, l = A.length; i < l; ++i) {\n  csvRows.push(A[i].join(\",\"));\n}\n\nvar csvString = csvRows.join(\"%0A\");\nvar a = document.createElement(\"a\");\na.href = \"data:attachment/csv,\" + encodeURIComponent(csvString);\na.target = \"_blank\";\na.download = \"myFile.csv\";\ndocument.body.appendChild(a);\na.click();","map":{"version":3,"sources":["/Users/shuyun/Desktop/vscode/xml-to-csv/UI/src/services/convertXml.tsx"],"names":["convertXml","dataFromForm","console","log","getHeaders","formToArray","xmlParser","DOMParser","xmlDoc","parseFromString","getElementsByTagName","textContent","split","xmlDocArr","header","forEach","row","includes","A","j","push","toString","Math","sqrt","csvRows","i","l","length","join","csvString","a","document","createElement","href","encodeURIComponent","target","download","body","appendChild","click"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAIC,YAAD,IAA0B;AACnDC,EAAAA,OAAO,CAACC,GAAR,CAAYC,UAAU,CAACC,WAAW,CAACJ,YAAD,CAAX,IAA6B,EAA9B,CAAtB;AACA,CAFM;AAIP,OAAO,MAAMI,WAAW,GAAIJ,YAAD,IAA0B;AAAA;;AACpD,MAAIK,SAAS,GAAG,IAAIC,SAAJ,EAAhB;AACA,MAAIC,MAAM,GAAGF,SAAS,CAACG,eAAV,CAA0BR,YAA1B,EAAwC,UAAxC,CAAb;AACA,kCAAOO,MAAM,CACXE,oBADK,CACgB,iBADhB,EACmC,CADnC,EAELC,WAFF,0DAAO,sBAEQC,KAFR,CAEc,IAFd,CAAP;AAGA,CANM;AAQP,OAAO,MAAMR,UAAU,GAAIS,SAAD,IAAyB;AAClD,MAAIC,MAAJ;AACAD,EAAAA,SAAS,CAACE,OAAV,CAAmBC,GAAD,IAAS;AAC1B,QAAIA,GAAG,CAACC,QAAJ,CAAa,KAAb,CAAJ,EAAyBH,MAAM,GAAGE,GAAG,CAACJ,KAAJ,CAAU,GAAV,CAAT,CADC,CACwB;AAClD,GAFD;AAGA,SAAOE,MAAP;AACA,CANM;AAQP,IAAII,CAAC,GAAG,CAAC,CAAC,GAAD,EAAM,SAAN,CAAD,CAAR;;AACA,KAAK,IAAIC,CAAS,GAAG,CAArB,EAAwBA,CAAC,GAAG,EAA5B,EAAgC,EAAEA,CAAlC,EAAqC;AACpCD,EAAAA,CAAC,CAACE,IAAF,CAAO,CAACD,CAAC,CAACE,QAAF,EAAD,EAAeC,IAAI,CAACC,IAAL,CAAUJ,CAAV,EAAaE,QAAb,EAAf,CAAP;AACA;;AACD,IAAIG,OAAO,GAAG,EAAd;;AAEA,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGR,CAAC,CAACS,MAAtB,EAA8BF,CAAC,GAAGC,CAAlC,EAAqC,EAAED,CAAvC,EAA0C;AACzCD,EAAAA,OAAO,CAACJ,IAAR,CAAaF,CAAC,CAACO,CAAD,CAAD,CAAKG,IAAL,CAAU,GAAV,CAAb;AACA;;AAED,IAAIC,SAAS,GAAGL,OAAO,CAACI,IAAR,CAAa,KAAb,CAAhB;AACA,IAAIE,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR;AACAF,CAAC,CAACG,IAAF,GAAS,yBAAyBC,kBAAkB,CAACL,SAAD,CAApD;AACAC,CAAC,CAACK,MAAF,GAAW,QAAX;AACAL,CAAC,CAACM,QAAF,GAAa,YAAb;AAEAL,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,CAA1B;AACAA,CAAC,CAACS,KAAF","sourcesContent":["export const convertXml = (dataFromForm: string) => {\n\tconsole.log(getHeaders(formToArray(dataFromForm) || []));\n};\n\nexport const formToArray = (dataFromForm: string) => {\n\tvar xmlParser = new DOMParser();\n\tvar xmlDoc = xmlParser.parseFromString(dataFromForm, \"text/xml\");\n\treturn xmlDoc\n\t\t.getElementsByTagName(\"CSVIntervalData\")[0]\n\t\t.textContent?.split(\"\\n\");\n};\n\nexport const getHeaders = (xmlDocArr: string[]) => {\n\tlet header;\n\txmlDocArr.forEach((row) => {\n\t\tif (row.includes(\"100\")) header = row.split(\",\"); //get the header row which contains 100\n\t});\n\treturn header;\n};\n\nvar A = [[\"n\", \"sqrt(n)\"]];\nfor (var j: number = 1; j < 10; ++j) {\n\tA.push([j.toString(), Math.sqrt(j).toString()]);\n}\nvar csvRows = [];\n\nfor (var i = 0, l = A.length; i < l; ++i) {\n\tcsvRows.push(A[i].join(\",\"));\n}\n\nvar csvString = csvRows.join(\"%0A\");\nvar a = document.createElement(\"a\");\na.href = \"data:attachment/csv,\" + encodeURIComponent(csvString);\na.target = \"_blank\";\na.download = \"myFile.csv\";\n\ndocument.body.appendChild(a);\na.click();\n"]},"metadata":{},"sourceType":"module"}